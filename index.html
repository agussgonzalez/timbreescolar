<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timbre Escolar</title>

    <head>
        <style>
            body {
                background-color: black;
                color: white;
                text-align: center;
                font-family: monospace;
                font-size: 2rem;
                
            }
            @keyframes parpadeo {
                0% {
                    opacity: 1;
                    color: black;
                }

                50% {
                    opacity: 0;
                    color: red;
                }

                100% {
                    opacity: 1;
                    color: black;
                }
            }

            .animar {
                animation: parpadeo 3s ease-in-out;
            }
        </style>
    </head>
</head>

<body>
    <h1>Timbre Escolar</h1>
    <p>La página está abierta. Reproduciendo sonido en los horarios establecidos.</p>
    <audio id="timbre" src="timbre.wav" preload="auto"></audio>
    <script>
        const reproducirTimbre = () => {
            const audio = document.getElementById('timbre');
            const titulo = document.querySelector('h1');

            audio.play();

            // Añadir la clase de animación
            titulo.classList.add('animar');

            // Remover la clase después de que la animación termine
            setTimeout(() => {
                titulo.classList.remove('animar');
            }, 3000);
        };

        // Lista de horarios en los que se debe reproducir el sonido
        const horarios = [
            "07:30", "08:10", "08:50", "08:55", "09:35", "10:15", "10:25",
            "11:05", "11:45", "11:50", "12:30", "13:00", "13:40", "14:20",
            "14:25", "15:05", "15:45", "15:55", "16:35", "17:15", "17:20",
            "18:00", "18:40", "20:00", "22:00"
        ];

        const comprobarHora = () => {
            const ahora = new Date();
            const hora = String(ahora.getHours()).padStart(2, '0');
            const minuto = String(ahora.getMinutes()).padStart(2, '0');
            const horaActual = `${hora}:${minuto}`;

            // Verifica si la hora actual está en la lista de horarios
            if (horarios.includes(horaActual)) {
                reproducirTimbre();
            }
        };

        // Ejecuta comprobarHora cada 1/2 minuto
        setInterval(comprobarHora, 30000);

        // Comprueba la hora inmediatamente al cargar la página
        comprobarHora();
    </script>
</body>

</html>